<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário com Webhook</title>
</head>
<body>
    <form id="meuFormulario">
        <label>Nome Completo:</label>
        <input type="text" id="nomeCompleto" required><br><br>

        <label>CPF:</label>
        <input type="text" id="cpf" placeholder="000.000.000-00" required><br><br>

        <label>Telefone:</label>
        <input type="text" id="telefone" placeholder="(00) 00000-0000" required><br><br>

        <label>CEP:</label>
        <input type="text" id="cep" placeholder="00000-000" required><br><br>

        <label>Logradouro:</label>
        <input type="text" id="logradouro" required><br><br>

        <label>Número:</label>
        <input type="text" id="numero" required><br><br>

        <label>Complemento:</label>
        <input type="text" id="complemento"><br><br>

        <label>Bairro:</label>
        <input type="text" id="bairro" required><br><br>

        <label>Cidade:</label>
        <input type="text" id="cidade" required><br><br>

        <label>Estado:</label>
        <input type="text" id="estado" maxlength="2" required><br><br>

        <button type="submit">Enviar</button>
    </form>

    <script>
        document.getElementById("meuFormulario").addEventListener("submit", async function(e) {
            e.preventDefault();

            const nomeCompleto = document.getElementById("nomeCompleto").value.trim();
            const cpf = document.getElementById("cpf").value.trim(); // mantém pontos e hífen
            const telefone = document.getElementById("telefone").value.trim();

            // garante que o telefone sempre tenha o 0 na frente
            let telefoneComZero = telefone.startsWith("0") ? telefone : "0" + telefone;

            const formData = {
                nomeCompleto: nomeCompleto,
                cpf: cpf,   // mantém formatado
                telefone: telefoneComZero,
                endereco: {
                    cep: document.getElementById("cep").value.replace(/\D/g, ''), // CEP só números
                    logradouro: document.getElementById("logradouro").value.trim(),
                    numero: document.getElementById("numero").value.trim(),
                    complemento: document.getElementById("complemento").value.trim(),
                    bairro: document.getElementById("bairro").value.trim(),
                    cidade: document.getElementById("cidade").value.trim(),
                    estado: document.getElementById("estado").value.trim().toUpperCase()
                }
            };

            try {
                const response = await fetch("SUA_URL_DO_WEBHOOK_AQUI", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    alert("Formulário enviado com sucesso!");
                } else {
                    alert("Erro ao enviar formulário.");
                }
            } catch (error) {
                alert("Erro de conexão: " + error.message);
            }
        });
    </script>
</body>
</html>
